import streamlit as st
import random

# ìºë¦­í„° ì‹œë‚˜ë¦¬ì˜¤
characters = {
    "ë£¨ë¹„": {
        "emoji": "ğŸ’–",
        "personality": "í™œë°œí•˜ê³  ì—‰ëš±í•¨",
        "location_scenarios": {
            "ì¹´í˜": [
                {
                    "question": "â˜• ì–´ë–¤ ìŒë£Œë¥¼ ë§ˆì‹¤ê¹Œ?",
                    "options": {
                        "ë”¸ê¸° ë¼ë–¼! ë‹¬ì½¤í•œ ê²Œ ìµœê³ ì•¼!": [("êº„~ ë”¸ê¸° ì™„ì „ ì¢‹ì•„í•´! ğŸ“", +2)],
                        "ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸!": [("ë©‹ì§€ë‹¤~ ì–´ë¥¸ ê°™ì€ ëŠë‚Œì´ì•¼! ğŸ˜³", +1)],
                        "ë°”ë‹ë¼ ë¼ë–¼": [("ë‚˜ë„ ê·¸ê±° ì¢‹ì•„í•´~ ğŸ’•", +1)],
                        "í•«ì´ˆì½”": [("ë‹¬ì½¤í•œ ê±° ì¢‹ì•„í•˜ëŠ”êµ¬ë‚˜~ â˜•", +2)]
                    }
                },
                {
                    "question": "ğŸ“š ë¬´ìŠ¨ ëŒ€í™”ë¥¼ í•´ë³¼ê¹Œ?",
                    "options": {
                        "ìš”ì¦˜ ë³¸ ì˜í™” ì´ì•¼ê¸°": [("ì¬ë°Œê² ë‹¤~ ë‹¤ìŒì— ê°™ì´ ë³´ì! ğŸ¬", +2)],
                        "ìµœê·¼ ê³ ë¯¼ ë‚˜ëˆ„ê¸°": [("ê·¸ë¬êµ¬ë‚˜... ë£¨ë¹„ê°€ ë“¤ì–´ì¤„ê²Œ ğŸ’•", +1)],
                        "ì¢‹ì•„í•˜ëŠ” ìŒì•… ì–˜ê¸°": [("í— ë‚˜ë„ ê·¸ ê°€ìˆ˜ ì¢‹ì•„í•´! ğŸ¶", +2)],
                        "ë‚ ì”¨ ì–˜ê¸°": [("ì˜¤ëŠ˜ ë‚ ì”¨ ì§„ì§œ ì¢‹ë‹¤~ ì‚°ì±…ê°€ì! â˜€ï¸", +1)]
                    }
                }
            ],
            "ê³µì›": [
                {
                    "question": "ğŸŒ³ ê³µì›ì—ì„œ ë­í• ê¹Œ?",
                    "options": {
                        "ì‚°ì±…í•˜ì~": [("ê¸°ë¶„ ìƒì¾Œí•´~ ë°”ëŒ ì¢‹ì•„! ğŸƒ", +1)],
                        "ë²¤ì¹˜ì— ì•‰ì•„ì„œ ì–˜ê¸°í•˜ì": [("í¸ì•ˆí•˜ë‹¤~ ì´ì•¼ê¸°ë„ ì˜ í†µí•˜ë„¤ ğŸ˜Œ", +2)],
                        "ë›°ì–´ë†€ì!": [("í—‰ ì²´ë ¥ ì§±ì´ë‹¤! ğŸ˜†", +1)],
                        "ì‚¬ì§„ ì°ì": [("ì¸ìƒìƒ· ê°! ğŸ“¸", +2)]
                    }
                }
            ],
            "ì‹ë‹¹": [
                {
                    "question": "ğŸ½ï¸ ë­ ë¨¹ì„ê¹Œ?",
                    "options": {
                        "ê¹€ì¹˜ì°Œê°œ": [("êµ­ë¬¼ ì§„ì§œ ì‹œì›í•˜ë‹¤~! ğŸ˜‹", +2)],
                        "ìŠ¤íŒŒê²Œí‹°": [("ì´íƒˆë¦¬ì•ˆ ë¬´ë“œ~ ğŸ", +1)],
                        "ì´ˆë°¥": [("íšŒ ì¢‹ì•„í•˜ëŠ”êµ¬ë‚˜! ğŸŸ", +2)],
                        "í–„ë²„ê±°": [("íŒ¨ìŠ¤íŠ¸í‘¸ë“œë„ ì¢‹ì§€! ğŸ”", +1)]
                    }
                }
            ]
        }
    }
}

# Streamlit ì„¤ì •
st.set_page_config(page_title="AI ì¹œêµ¬ì™€ ë°ì´íŠ¸í•˜ê¸° ğŸ’˜", page_icon="ğŸ’˜")
st.title("ğŸ’˜ AI ì¹œêµ¬ì™€ ë°ì´íŠ¸í•˜ê¸° ğŸ’˜")

username = st.text_input("ë‹¹ì‹ ì˜ ì´ë¦„ì€?")
place = st.radio("ë°ì´íŠ¸ ì¥ì†Œë¥¼ ê³¨ë¼ì£¼ì„¸ìš”!", ["ì¹´í˜", "ê³µì›", "ì‹ë‹¹"])

if st.button("âœ¨ AI ìºë¦­í„° ë§Œë‚˜ê¸°!"):
    character_name = random.choice(list(characters.keys()))
    character = characters[character_name]
    st.subheader(f"ì˜¤ëŠ˜ ë°ì´íŠ¸ ìƒëŒ€ëŠ” {character_name} {character['emoji']}")
    st.markdown(f"**ì„±ê²©:** {character['personality']}")

    score = 0
    for scene in character["location_scenarios"][place]:
        st.write("---")
        st.write(scene["question"])
        choice = st.radio("ì„ íƒì§€ ì¤‘ í•˜ë‚˜ë¥¼ ê³¨ë¼ë³´ì„¸ìš”:", list(scene["options"].keys()), key=scene["question"])
        reaction, delta = random.choice(scene["options"][choice])
        st.write(f"ğŸ—£ï¸ {character_name}: {reaction}")
        score += delta

    st.write("---")
    st.subheader("ğŸ€ ë°ì´íŠ¸ ê²°ê³¼ ğŸ’Œ")
    if score >= 5:
        st.success(f"{character_name}ì´(ê°€) ë‹¹ì‹ ì—ê²Œ ë°˜í–ˆì–´ìš”! ğŸ’")
    elif score >= 3:
        st.info(f"{character_name}ê³¼(ì™€) ì¢‹ì€ ì¹œêµ¬ê°€ ë˜ì—ˆì–´ìš”! ğŸ¤")
    else:
        st.error(f"{character_name}ì€(ëŠ”) ì•„ì§ ì–´ìƒ‰í•œê°€ë´ìš”... ë‹¤ìŒ ê¸°íšŒì—! ğŸ’”")
